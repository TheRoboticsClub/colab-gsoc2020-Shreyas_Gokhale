<!DOCTYPE html> <html lang="en-US"> <head prefix="og: http://ogp.me/ns#"> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="ie=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <meta name="mobile-web-app-capable" content="yes" /> <meta name="p:domain_verify" content="74b28158c46b8035f8f4a5ba032e51b2" /> <meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="application-name" content="GSoC 2020 | Shreyas Gokhale" /> <meta name="apple-mobile-web-app-status-bar-style" content="#fff" /> <meta name="apple-mobile-web-app-title" content="GSoC 2020 | Shreyas Gokhale" /> <title> And we have a liftoff! - GSoC 2020 | Shreyas Gokhale </title> <link rel="alternate" href="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/and-we-have-a-liftoff" hreflang="en-US" /> <link rel="canonical" href="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/and-we-have-a-liftoff" /> <meta name="description" content="Releasing jderobot_assets for ROS Noetic" /> <meta name="referrer" content="no-referrer-when-downgrade" /> <meta property="fb:app_id" content="" /> <meta property="og:site_name" content="And we have a liftoff! | shreyasgokhale" /> <meta property="og:title" content="And we have a liftoff! | shreyasgokhale" /> <meta property="og:type" content="website" /> <meta property="og:url" content="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/and-we-have-a-liftoff" /> <meta property="og:description" content="Releasing jderobot_assets for ROS Noetic" /> <meta property="og:image" content="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/assets/img/ogp.png" /> <meta property="og:image:width" content="640" /> <meta property="og:image:height" content="640" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:title" content="And we have a liftoff! | shreyasgokhale" /> <meta name="twitter:url" content="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/and-we-have-a-liftoff" /> <meta name="twitter:site" content="@shreyasgokhale" /> <meta name="twitter:creator" content="@shreyasgokhale" /> <meta name="twitter:description" content="Releasing jderobot_assets for ROS Noetic" /> <meta name="twitter:image" content="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/assets/img/ogp.png" /> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/feed.xml" title="GSoC 2020 | Shreyas Gokhale" /> <link rel="apple-touch-icon" sizes="180x180" href="/colab-gsoc2020-Shreyas_Gokhale/assets/favicons/apple-touch-icon.png" /> <link rel="icon" type="image/png" sizes="32x32" href="/colab-gsoc2020-Shreyas_Gokhale/assets/favicons/favicon-32x32.png" /> <link rel="icon" type="image/png" sizes="16x16" href="/colab-gsoc2020-Shreyas_Gokhale/assets/favicons/favicon-16x16.png" /> <link rel="manifest" href="/colab-gsoc2020-Shreyas_Gokhale/assets/favicons/site.webmanifest" /> <link rel="mask-icon" href="/colab-gsoc2020-Shreyas_Gokhale/assets/favicons/safari-pinned-tab.svg" color="#5bbad5" /> <meta name="apple-mobile-web-app-title" content="ShreyasGokhale" /> <meta name="application-name" content="ShreyasGokhale" /> <meta name="msapplication-TileColor" content="#da532c" /> <meta name="theme-color" content="#2c2c2c" /> <link rel="stylesheet" href="/colab-gsoc2020-Shreyas_Gokhale/assets/css/style.css" /> </head> <body> <div class="navbar" role="navigation"> <nav class="menu"> <input type="checkbox" id="menu-trigger" class="menu-trigger" /> <label for="menu-trigger"> <span class="menu-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z" /> </svg> </span> </label> <a id="mood"> <svg class="mood-sunny" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>LIGHT</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> <svg class="mood-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>DARK</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> </a> <div class="trigger"> <div class="trigger-container"> <a class="menu-link" href="/colab-gsoc2020-Shreyas_Gokhale">home</a> <a class="menu-link" href="/colab-gsoc2020-Shreyas_Gokhale/about/">about author</a> <a class="menu-link" href="https://www.notion.so/shreyasgokhale/GSoC-JdeRobot-ff2c6cf65b3f4a488ca0af77e1daeff1" target="_blank" rel="noopener" >GSoC dashboard</a > <a class="menu-link" href="https://jderobot.github.io/" target="_blank" rel="noopener" >jderobot academy</a > <a class="menu-link" href="https://github.com/TheRoboticsClub/colab-gsoc2020-Shreyas_Gokhale" target="_blank" rel="noopener" >github repo</a > <a class="menu-link rss" href="/feed.xml"> <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 512 512" fill="#ED812E" > <title>RSS</title> <path d="M108.56,342.78a60.34,60.34,0,1,0,60.56,60.44A60.63,60.63,0,0,0,108.56,342.78Z" /> <path d="M48,186.67v86.55c52,0,101.94,15.39,138.67,52.11s52,86.56,52,138.67h86.66C325.33,312.44,199.67,186.67,48,186.67Z" /> <path d="M48,48v86.56c185.25,0,329.22,144.08,329.22,329.44H464C464,234.66,277.67,48,48,48Z" /> </svg> </a> </div> </div> </nav> </div> <div class="wrapper post"> <main class="page-content" aria-label="Content"> <article itemscope itemtype="https://schema.org/BlogPosting"> <header class="header"> <div class="tags"> <span itemprop="keywords"> <a class="tag" href="/tags/#release">RELEASE</a>, <a class="tag" href="/tags/#how-to">HOW-TO</a>, <a class="tag" href="/tags/#week-1">WEEK-1</a> </span> </div> <h1 class="header-title" itemprop="headline">And we have a liftoff!</h1> <div class="post-meta"> <time datetime="2020-06-03T11:00:00+02:00" itemprop="datePublished"> Jun 03, 2020 </time> <span itemprop="author" itemscope itemtype="https://schema.org/Person"> <span itemprop="name">Shreyas Gokhale</span> </span> <time hidden datetime="" itemprop="dateModified"> Jun 03, 2020 </time> <span hidden itemprop="publisher" itemtype="Person">Shreyas Gokhale</span> <span hidden itemprop="image"></span> <span hidden itemprop="mainEntityOfPage"><blockquote> <p>Issues Fixed:</p> <p><a href="https://github.com/JdeRobot/assets/pull/53">#53,54</a> <em>“Adding Noetic support for repo”</em> with PRs <a href="https://github.com/JdeRobot/assets/pull/54">#54</a> for Jderobot_assets, and <a href="https://github.com/ros/rosdistro/pull/25236">#25236</a> for ROS distro with <a href="https://github.com/JdeRobot/assets-release/commits?author=shreyasgokhale">commits</a>.</p> </blockquote> </span> </div> </header> <div class="page-content" itemprop="articleBody"> <blockquote> <p>Issues Fixed:</p> <p><a href="https://github.com/JdeRobot/assets/pull/53">#53,54</a> <em>“Adding Noetic support for repo”</em> with PRs <a href="https://github.com/JdeRobot/assets/pull/54">#54</a> for Jderobot_assets, and <a href="https://github.com/ros/rosdistro/pull/25236">#25236</a> for ROS distro with <a href="https://github.com/JdeRobot/assets-release/commits?author=shreyasgokhale">commits</a>.</p> </blockquote> <h1 id="week-1-blog"> <a href="#week-1-blog" class="anchor-head"></a> Week 1 Blog </h1> <p>This week begins the official start of the 2020 GSoC and with that, we have the first package release from Jderobot Academy for ROS Noetic: Jderobot-Assets! Although porting a simple dependancies packages was not so challenging, the release process was indeed an interesting one!</p> <h2 id="releasing-ros-packages"> <a href="#releasing-ros-packages" class="anchor-head"></a> Releasing ROS Packages </h2> <p>Software in ROS is organized in packages and that is what makes ROS so easy to use. Since the introduction of catkin, ros packages are super easy to use, make and also to distribute. But what does it exactly mean when you want to release the package. Let me explain it with a story.</p> <h3 id="why-to-release"> <a href="#why-to-release" class="anchor-head"></a> Why to release? </h3> <p>Suppose you have created a package, have tested it and it works quite fine locally. You currently have it in your catkin_workspace/src folder and now you want to give to give it to your friends.</p> <p>Easy, you just upload the repo on github and tell your friends to download it.</p> <p>Your friends like your package and they recommend to their friends. Your package is instant hit and now everyone wants it. Meanwhile people are contributing to your github repo to improve the package.</p> <p>One day you find out that when you pull the latest changes, your package is not getting compiled. But some other user has no such problem. Somewhere, there was a package, dependent on your package, which is now also not working. You have now no clue what broke the package, how to restore it to a working version. At the same time, there are many users which have different platforms and they need an easier way to get the package rather than doing a git pull.</p> <p>Now you wished only if there existed some kind of common infrastructure which can make all these problems go away.</p> <p>Then you remember there exists such a place: the official ros package repository. (AKA the place from where you can just do <code class="highlighter-rouge">apt install ros-&lt;distro&gt;-&lt;package&gt;</code> . In short, this is what it means by releasing the package.</p> <h3 id="prepare-for-release"> <a href="#prepare-for-release" class="anchor-head"></a> Prepare for release </h3> <p>For release, we need a couple of things</p> <ol> <li>The package must be in <a href="http://wiki.ros.org/ROS/Tutorials/CreatingPackage">right format</a>, with <code class="highlighter-rouge">package.xml</code> filled in and ready for the release.</li> <li>The package must be indexed in the <a href="https://github.com/ros/rosdistro">rosdistro</a> by creating a PR</li> <li>Package needs to be converted into a binary (<code class="highlighter-rouge">ros-rosdistro-example-package</code>)</li> </ol> <p>Our package will have 2 repositories, one where we put our package and another one with <package-name>-release. The second repository is only for recording releases **and you don't have to edit it manually.**</package-name></p> <p>Now, to make our lives easier, ROS has a release automation tool called <a href="http://wiki.ros.org/bloom">bloom</a>. We can also do everything we mentioned using bloom. But before that, we need to check a few things:</p> <ul class="task-list"> <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Check if xml is in correct format (the first line must be xml indication tag, don’t put comments there!) Do <strong>not</strong> edit the version and other information manually. It will be updated during the bloom release.</li> <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Do you have push access to the main package repository and the release repository? (if they exist already) Otherwise, follow <a href="http://wiki.ros.org/bloom/Tutorials/FirstTimeRelease">this</a> for the first time release</li> <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Have you merged all of your changes in the branch you are aiming for the release?</li> <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Is bloom installed? <code class="highlighter-rouge">sudo apt-get install python-bloom</code></li> <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Is your package already indexed? If not, follow <a href="http://wiki.ros.org/rosdistro/Tutorials/Indexing%20Your%20ROS%20Repository%20for%20Documentation%20Generation">this</a>.</li> <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Make sure you have authorised bloom for github PRs using <a href="http://wiki.ros.org/bloom/Tutorials/GithubManualAuthorization">this</a> tutorial.</li> <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Have you read the documentation on <a href="http://wiki.ros.org/bloom">here</a>?</li> </ul> <p>Now we can do the release:</p> <h3 id="the-release-process"> <a href="#the-release-process" class="anchor-head"></a> The release process </h3> <ol> <li>Generate <code class="highlighter-rouge">changelog.rst</code> using <code class="highlighter-rouge">catkin_generate_changelog</code> for a new version update. The file will be automatically updated based on your previous commits and the contributers. Edit if necessary.</li> <li>Commit and push changes.</li> <li>Prepare package for release using <code class="highlighter-rouge">catkin_prepare_release</code> . This will increment the version of your package ( 1.0.2 →1.0.3) and tag it on git for appropriate release.</li> <li>Run <code class="highlighter-rouge">bloom-release</code> with appropriate command parameters. <ol> <li>If a completely new release: <code class="highlighter-rouge">bloom-release --rosdistro &lt;ros_distro&gt; --track &lt;ros_distro&gt; &lt;your_repository_name&gt; --edit</code></li> <li>If updating distro, for example hydro <code class="highlighter-rouge">bloom-release foo --track hydro --rosdistro hydro --new-track</code></li> <li>If updating version for melodic <code class="highlighter-rouge">bloom-release foo --rosdistro melodic</code></li> </ol> </li> <li>Follow on screen instructions. Keep options mostly the same except probably the branch from which you are going to deploy.</li> <li>The Bloom will do everything. Sit back and watch for errors.</li> <li>If everything goes fine, bloom will update release repo and also create a PR for ROS distro on behalf of your release.</li> <li>Wait for your PR to be approved (Might take a day or two)</li> <li>Do your victory dance!</li> </ol> <p>This week I did all these things and finally published <a href="https://github.com/JdeRobot/assets">jderobot_assets</a> package for ROS Noetic. The above guide was the summary of the instructions that I followed. However, the guide might be incorrect/ incomplete and I’ll be updating it as I port more packages.</p> <h2 id="one-docker-command-to-run-it-all"> <a href="#one-docker-command-to-run-it-all" class="anchor-head"></a> One (docker) command to run it all </h2> <p>I added a docker compose file which sets up the docker containers in a proper way. Also updated our academy image with multi stage builds and mesa packages so it can run GUI applications.</p> <p>Now it can start the academy exercise effortlessly, with one command.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xhost +<span class="s2">"local:docker@"</span> 
docker-compose up <span class="nt">--build</span>
</code></pre></div></div> <p>Docker will pull required images and copy exercise folders to launch the exercise.</p> <p><img src="assets/blog-images/week-1/amazon-warehouse.png" alt="" /></p> <p>Give it a go and report me if there are any issues!</p> <p>Au revoir!</p> </div> </article> </main> <nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/colab-gsoc2020-Shreyas_Gokhale/community-bonding-2" > <div class="nav-arrow">Previous</div> <span class="post-title">Community Bonding 2</span> </a> </nav> </div> <footer class="footer"> <a class="footer_item" href="https://github.com/shreyasgokhale">github</a> <a class="footer_item" href="https://www.linkedin.com/in/shreyas6gokhale/">linkedin</a> <a class="footer_item" href="https://www.instagram.com/elementaryshr/">instagram</a> <a class="footer_item" href="https://shreyasgokhale.com/">blog</a> <a class="footer_item" href="https://www.shreyasgokhaleresu.me/">portfolio</a> <a class="footer_item" href="/feed.xml">rss</a> <span class="footer_item">&copy; 2020</span> <small class="footer_theme-copyright"> <!-- Klisé Theme: https://github.com/piharpi/jekyll-klise --> <a href="https://jekyllrb.com" target="_blank" rel="noreferrer noopener" >jekyll</a> <a href="https://github.com/piharpi/jekyll-klise" target="_blank" rel="noreferrer noopener" >klisé</a> theme | modified by <a href="https://shreyasgokhale.com/" target="_blank" rel="noreferrer noopener" >shreyas</a> </small> </footer> <script src="/colab-gsoc2020-Shreyas_Gokhale/assets/js/main.js" defer="defer"></script> <script src="/colab-gsoc2020-Shreyas_Gokhale/assets/js/galite.js"></script> <script> var galite = galite || {}; galite.UA = "UA-126403543-4"; </script> </body> </html>
