<!DOCTYPE html> <html lang="en-US"> <head prefix="og: http://ogp.me/ns#"> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="ie=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <meta name="mobile-web-app-capable" content="yes" /> <meta name="p:domain_verify" content="74b28158c46b8035f8f4a5ba032e51b2" /> <meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="application-name" content="GSoC 2020 | Shreyas Gokhale" /> <meta name="apple-mobile-web-app-status-bar-style" content="#fff" /> <meta name="apple-mobile-web-app-title" content="GSoC 2020 | Shreyas Gokhale" /> <title> Community Bonding 1 - GSoC 2020 | Shreyas Gokhale </title> <link rel="alternate" href="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/community-bonding-1" hreflang="en-US" /> <link rel="canonical" href="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/community-bonding-1" /> <meta name="description" content="Exploring Jderobot academy in community bonding period." /> <meta name="referrer" content="no-referrer-when-downgrade" /> <meta property="fb:app_id" content="" /> <meta property="og:site_name" content="Community Bonding 1 | shreyasgokhale" /> <meta property="og:title" content="Community Bonding 1 | shreyasgokhale" /> <meta property="og:type" content="website" /> <meta property="og:url" content="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/community-bonding-1" /> <meta property="og:description" content="Exploring Jderobot academy in community bonding period." /> <meta property="og:image" content="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/assets/img/ogp.png" /> <meta property="og:image:width" content="640" /> <meta property="og:image:height" content="640" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:title" content="Community Bonding 1 | shreyasgokhale" /> <meta name="twitter:url" content="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/community-bonding-1" /> <meta name="twitter:site" content="@shreyasgokhale" /> <meta name="twitter:creator" content="@shreyasgokhale" /> <meta name="twitter:description" content="Exploring Jderobot academy in community bonding period." /> <meta name="twitter:image" content="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/assets/img/ogp.png" /> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/feed.xml" title="GSoC 2020 | Shreyas Gokhale" /> <link rel="apple-touch-icon" sizes="180x180" href="/colab-gsoc2020-Shreyas_Gokhale/assets/favicons/apple-touch-icon.png" /> <link rel="icon" type="image/png" sizes="32x32" href="/colab-gsoc2020-Shreyas_Gokhale/assets/favicons/favicon-32x32.png" /> <link rel="icon" type="image/png" sizes="16x16" href="/colab-gsoc2020-Shreyas_Gokhale/assets/favicons/favicon-16x16.png" /> <link rel="manifest" href="/colab-gsoc2020-Shreyas_Gokhale/assets/favicons/site.webmanifest" /> <link rel="mask-icon" href="/colab-gsoc2020-Shreyas_Gokhale/assets/favicons/safari-pinned-tab.svg" color="#5bbad5" /> <meta name="apple-mobile-web-app-title" content="ShreyasGokhale" /> <meta name="application-name" content="ShreyasGokhale" /> <meta name="msapplication-TileColor" content="#da532c" /> <meta name="theme-color" content="#2c2c2c" /> <link rel="stylesheet" href="/colab-gsoc2020-Shreyas_Gokhale/assets/css/style.css" /> </head> <body> <div class="navbar" role="navigation"> <nav class="menu"> <input type="checkbox" id="menu-trigger" class="menu-trigger" /> <label for="menu-trigger"> <span class="menu-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z" /> </svg> </span> </label> <a id="mood"> <svg class="mood-sunny" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>LIGHT</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> <svg class="mood-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>DARK</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> </a> <div class="trigger"> <div class="trigger-container"> <a class="menu-link" href="/colab-gsoc2020-Shreyas_Gokhale">home</a> <a class="menu-link" href="/colab-gsoc2020-Shreyas_Gokhale/about/">about author</a> <a class="menu-link" href="https://www.notion.so/shreyasgokhale/GSoC-JdeRobot-ff2c6cf65b3f4a488ca0af77e1daeff1" target="_blank" rel="noopener" >GSoC dashboard</a > <a class="menu-link" href="https://jderobot.github.io/" target="_blank" rel="noopener" >jderobot academy</a > <a class="menu-link" href="https://github.com/TheRoboticsClub/colab-gsoc2020-Shreyas_Gokhale" target="_blank" rel="noopener" >github repo</a > <a class="menu-link rss" href="/feed.xml"> <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 512 512" fill="#ED812E" > <title>RSS</title> <path d="M108.56,342.78a60.34,60.34,0,1,0,60.56,60.44A60.63,60.63,0,0,0,108.56,342.78Z" /> <path d="M48,186.67v86.55c52,0,101.94,15.39,138.67,52.11s52,86.56,52,138.67h86.66C325.33,312.44,199.67,186.67,48,186.67Z" /> <path d="M48,48v86.56c185.25,0,329.22,144.08,329.22,329.44H464C464,234.66,277.67,48,48,48Z" /> </svg> </a> </div> </div> </nav> </div> <div class="wrapper post"> <main class="page-content" aria-label="Content"> <article itemscope itemtype="https://schema.org/BlogPosting"> <header class="header"> <div class="tags"> <span itemprop="keywords"> <a class="tag" href="/colab-gsoc2020-Shreyas_Gokhale/tags/#path-planning">PATH-PLANNING</a>, <a class="tag" href="/colab-gsoc2020-Shreyas_Gokhale/tags/#global-navigation">GLOBAL-NAVIGATION</a>, <a class="tag" href="/colab-gsoc2020-Shreyas_Gokhale/tags/#community-bonding">COMMUNITY-BONDING</a> </span> </div> <h1 class="header-title" itemprop="headline">Community Bonding 1</h1> <div class="post-meta"> <time datetime="2020-05-17T20:00:00+02:00" itemprop="datePublished"> May 17, 2020 </time> <span itemprop="author" itemscope itemtype="https://schema.org/Person"> <span itemprop="name">Shreyas Gokhale</span> </span> <time hidden datetime="" itemprop="dateModified"> May 17, 2020 </time> <span hidden itemprop="publisher" itemtype="Person">Shreyas Gokhale</span> <span hidden itemprop="image"></span> <span hidden itemprop="mainEntityOfPage"><h1 id="global-navigation-path-planning">Global Navigation Path Planning</h1> </span> </div> </header> <div class="page-content" itemprop="articleBody"> <h1 id="global-navigation-path-planning"> <a href="#global-navigation-path-planning" class="anchor-head"></a> Global Navigation Path Planning </h1> <p>To get accustomed to the academy exercises, I wanted to start with an exercise which is somewhat familiar, yet challenging. Path planning is a typical problem in CS and it is used at various (and sometimes, <a href="https://www.researchgate.net/publication/267809499_A-based_Pathfinding_in_Modern_Computer_Games">quite unusual</a> ! ) places. Similarly, motion planning is important to actually follow path in a sequence.</p> <p>The exercise I selected <a href="https://jderobot.github.io/RoboticsAcademy/exercises/AutonomousCars/global_navigation/">Global Navigation</a> exercise which combines path planning with motion planning.</p> <h2 id="pre-processing"> <a href="#pre-processing" class="anchor-head"></a> Pre Processing </h2> <p>As usual, I started by setting my environment</p> <ul> <li>Configured PyCharm for the repo</li> <li>Created and set up pip venv for easy access</li> <li>Created a <code class="highlighter-rouge">requirements.txt</code> file for future installs (in case pyqt5 of problem, use this -&gt; <a href="https://stackoverflow.com/questions/18042919/how-to-install-pyqt5-on-a-new-virtualenv-and-work-on-an-idle">https://stackoverflow.com/questions/18042919/how-to-install-pyqt5-on-a-new-virtualenv-and-work-on-an-idle</a> )</li> </ul> <h3 id="understanding-apis"> <a href="#understanding-apis" class="anchor-head"></a> Understanding APIs </h3> <p>Listing various APIs mentioned on the page:</p> <h4 id="base-apis"> <a href="#base-apis" class="anchor-head"></a> Base APIs </h4> <ul> <li><code class="highlighter-rouge">sensor.getRobotX()</code> - to obtain the position of the robot</li> <li><code class="highlighter-rouge">sensor.getRobotY()</code> - to obtain the position of the robot</li> <li><code class="highlighter-rouge">sensor.getRobotTheta()</code> - to obtain the orientation of the robot with respect to the map</li> <li><code class="highlighter-rouge">vel.setV()</code> - to set the linear speed</li> <li><code class="highlighter-rouge">vel.setW()</code> - to set the angular velocity</li> </ul> <h4 id="grid-apis"> <a href="#grid-apis" class="anchor-head"></a> Grid APIs </h4> <ul> <li><code class="highlighter-rouge">grid.getMap()</code> - returns the image of the map that is being displayed. The image returned will be a 3-channel image with values 0 or 255, where 0 represents the obstacles and 255 the road. Although the image has 3 channels, for this practice it will be useful to use only one.</li> <li><code class="highlighter-rouge">grid.getDestiny()</code> - returns the selected destination through the GUI as a tuple (x, y).</li> <li><code class="highlighter-rouge">grid.getPose()</code> - returns the position with respect to the map, not with respect to the world, also as a tuple (x, y).</li> <li><code class="highlighter-rouge">grid.showGrid()</code> - creates a window in which represents the values ​​of the field that have been assigned to the grid. The smaller values ​​will have a color closer to black, and will become clearer as larger values ​​are involved. For the representation, a copy of the grid is made and its values ​​are normalized so that they are between 0 and 1, and it is represented later with cv2.imshow().</li> <li><code class="highlighter-rouge">grid.getVal(x, y)</code> - returns the value in that grid position.</li> <li><code class="highlighter-rouge">grid.setVal(x, y, val)</code> - sets the value val to the indicated position.</li> <li><code class="highlighter-rouge">grid.setPathVal(x, y, val)</code> - sets the value val to the indicated position.</li> <li><code class="highlighter-rouge">grid.getPathVal(x, y)</code> - returns the value of the indicated position.</li> <li><code class="highlighter-rouge">grid.setPathFinded()</code> - establishes that the path has been found to start painting.</li> <li><code class="highlighter-rouge">gridToWorld(gridX, gridY)</code> - receives the x and y components of the coordinates of the map and returns a tuple with the equivalent coordinates in the world: (worldX, worldY)</li> <li><code class="highlighter-rouge">worldToGrid(worldX, worldY)</code> - receives the x and y components of the world coordinates and returns a tuple with the equivalent coordinates in the map: (gridX, gridY)</li> </ul> <p>I executed a few to understand the structures</p> <h4 id="responses"> <a href="#responses" class="anchor-head"></a> <strong>Responses</strong> </h4> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">getMap</span><span class="p">()</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">29</span> <span class="mi">13</span> <span class="mi">17</span> <span class="o">...</span> <span class="mi">17</span> <span class="mi">12</span> <span class="mi">32</span><span class="p">]</span>
                        <span class="p">[</span><span class="mi">14</span> <span class="mi">0</span> <span class="mi">0</span> <span class="o">...</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">17</span><span class="p">]</span>
                        <span class="p">[</span><span class="mi">14</span> <span class="mi">0</span> <span class="mi">0</span> <span class="o">...</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">17</span><span class="p">]</span>
                        <span class="o">...</span>
                        <span class="p">[</span><span class="mi">14</span> <span class="mi">0</span> <span class="mi">0</span> <span class="o">...</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">17</span><span class="p">]</span>
                        <span class="p">[</span><span class="mi">14</span> <span class="mi">0</span> <span class="mi">0</span> <span class="o">...</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">16</span><span class="p">]</span>
                        <span class="p">[</span><span class="mi">28</span> <span class="mi">12</span> <span class="mi">17</span> <span class="o">...</span> <span class="mi">16</span> <span class="mi">12</span> <span class="mi">31</span><span class="p">]]</span>

<span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">getDestiny</span><span class="p">()</span> <span class="o">=</span> <span class="p">(</span><span class="mi">274</span><span class="p">,</span> <span class="mi">27</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">getPose</span><span class="p">()</span> <span class="o">=</span> <span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
</code></pre></div></div> <p>This confirmed a few things:</p> <ul> <li>The Map will <em>probably</em> need a conversion to binary representation.</li> <li>The co-ordinates of destination and source are flipped (or if you consider the other way, the map is flipped)</li> <li>The whole map is visible, hence the algorithm <strong>must</strong> either return the path or the point is non-traversable.</li> <li>As the maze is connected, ( and is not disjoint at some places) we can safely say that white point (255) is traversable.</li> </ul> <h2 id="path-planning-algorithm"> <a href="#path-planning-algorithm" class="anchor-head"></a> Path planning algorithm </h2> <p>As described on the exercise page, we can either solve this using gradient path planning and sampling based path planning. Both have their positives and negatives and either are preferable in specific scenarios. As the exercise was already solved using Gradient Path planning, I decided to solve it using sampling based approaches.</p> <p>The most basic and simplest of sampling based path planning algorithm (after Dijkstra) is A*. The concept is simple:</p> <ul> <li>The map is divided in nodes</li> <li>Each node has 2 properties: It’s distance from start node (g) and the destination node (h)</li> <li>We have to select nodes in such a way that we have a minimum over these two properties. i.e minimum of f = g + h</li> </ul> <p>I found a simple implementation of A* in python on <a href="">this</a> blog. I made a class out of it and created a separate <code class="highlighter-rouge">AStar.py</code> file, which can be imported in our code. The class declaration method <code class="highlighter-rouge">AStar.Astar(map, source, dest)</code> accepts 3 arguments: A binary grid map, starting node (x1,y1) and destination node (x2,y2)</p> <p>After spending a lot of time in finding out why the path is not getting displayed even after setting the variable, I realised that I didn’t call the <code class="highlighter-rouge">self.grid.setPathFinded()</code> method.</p> <p><img src="https://media.giphy.com/media/AjYsTtVxEEBPO/giphy.gif" alt="Baka!" /></p> <p>And voila, there was the green path! Comparing times, the algorithm takes more time, farther the destination. But it is quite quick compared to gradient path planner!</p> <p><img src="assets/blog-images/community-bonding/AStar1.gif" alt="" /></p> <p>In the next post, we’ll go over the motion planning and squash bugs (if any!).</p> <p><strong><em>Ciao!</em></strong></p> <h3 id="reference"> <a href="#reference" class="anchor-head"></a> Reference: </h3> <p><a href="https://medium.com/@nicholas.w.swift/easy-a-star-pathfinding-7e6689c7f7b2">Easy A* (star) Pathfinding</a></p> </div> </article> </main> <nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/colab-gsoc2020-Shreyas_Gokhale/beginning-of-gsoc-journey" > <div class="nav-arrow">Previous</div> <span class="post-title">Beginning of GSoC 2020!</span> </a> <a class="post-nav-item post-nav-next" href="/colab-gsoc2020-Shreyas_Gokhale/community-bonding-2"> <div class="nav-arrow">Next</div> <span class="post-title">Community Bonding 2</span> </a> </nav> </div> <footer class="footer"> <a class="footer_item" href="https://github.com/shreyasgokhale">github</a> <a class="footer_item" href="https://www.linkedin.com/in/shreyas6gokhale/">linkedin</a> <a class="footer_item" href="https://www.instagram.com/elementaryshr/">instagram</a> <a class="footer_item" href="https://shreyasgokhale.com/">blog</a> <a class="footer_item" href="https://www.shreyasgokhaleresu.me/">portfolio</a> <a class="footer_item" href="/feed.xml">rss</a> <span class="footer_item">&copy; 2020</span> <small class="footer_theme-copyright"> <!-- Klisé Theme: https://github.com/piharpi/jekyll-klise --> <a href="https://jekyllrb.com" target="_blank" rel="noreferrer noopener" >jekyll</a> <a href="https://github.com/piharpi/jekyll-klise" target="_blank" rel="noreferrer noopener" >klisé</a> theme | modified by <a href="https://shreyasgokhale.com/" target="_blank" rel="noreferrer noopener" >shreyas</a> </small> </footer> <script src="/colab-gsoc2020-Shreyas_Gokhale/assets/js/main.js" defer="defer"></script> <script src="/colab-gsoc2020-Shreyas_Gokhale/assets/js/galite.js"></script> <script> var galite = galite || {}; galite.UA = "UA-126403543-4"; </script> </body> </html>
