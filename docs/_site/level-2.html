<!DOCTYPE html> <html lang="en-US"> <head prefix="og: http://ogp.me/ns#"> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="ie=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <meta name="mobile-web-app-capable" content="yes" /> <meta name="p:domain_verify" content="74b28158c46b8035f8f4a5ba032e51b2" /> <meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="application-name" content="GSoC 2020 | Shreyas Gokhale" /> <meta name="apple-mobile-web-app-status-bar-style" content="#fff" /> <meta name="apple-mobile-web-app-title" content="GSoC 2020 | Shreyas Gokhale" /> <title> Level 2! - GSoC 2020 | Shreyas Gokhale </title> <link rel="alternate" href="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/level-2" hreflang="en-US" /> <link rel="canonical" href="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/level-2" /> <meta name="description" content="Amazon warehouse exercise in ROS2" /> <meta name="referrer" content="no-referrer-when-downgrade" /> <meta property="fb:app_id" content="" /> <meta property="og:site_name" content="Level 2! | shreyasgokhale" /> <meta property="og:title" content="Level 2! | shreyasgokhale" /> <meta property="og:type" content="website" /> <meta property="og:url" content="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/level-2" /> <meta property="og:description" content="Amazon warehouse exercise in ROS2" /> <meta property="og:image" content="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/assets/img/ogp.png" /> <meta property="og:image:width" content="640" /> <meta property="og:image:height" content="640" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:title" content="Level 2! | shreyasgokhale" /> <meta name="twitter:url" content="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/level-2" /> <meta name="twitter:site" content="@shreyasgokhale" /> <meta name="twitter:creator" content="@shreyasgokhale" /> <meta name="twitter:description" content="Amazon warehouse exercise in ROS2" /> <meta name="twitter:image" content="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/assets/img/ogp.png" /> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/colab-gsoc2020-Shreyas_Gokhale/feed.xml" title="GSoC 2020 | Shreyas Gokhale" /> <link rel="apple-touch-icon" sizes="180x180" href="/colab-gsoc2020-Shreyas_Gokhale/assets/favicons/apple-touch-icon.png" /> <link rel="icon" type="image/png" sizes="32x32" href="/colab-gsoc2020-Shreyas_Gokhale/assets/favicons/favicon-32x32.png" /> <link rel="icon" type="image/png" sizes="16x16" href="/colab-gsoc2020-Shreyas_Gokhale/assets/favicons/favicon-16x16.png" /> <link rel="manifest" href="/colab-gsoc2020-Shreyas_Gokhale/assets/favicons/site.webmanifest" /> <link rel="mask-icon" href="/colab-gsoc2020-Shreyas_Gokhale/assets/favicons/safari-pinned-tab.svg" color="#5bbad5" /> <meta name="apple-mobile-web-app-title" content="ShreyasGokhale" /> <meta name="application-name" content="ShreyasGokhale" /> <meta name="msapplication-TileColor" content="#da532c" /> <meta name="theme-color" content="#2c2c2c" /> <link rel="stylesheet" href="/colab-gsoc2020-Shreyas_Gokhale/assets/css/style.css" /> </head> <body> <div class="navbar" role="navigation"> <nav class="menu"> <input type="checkbox" id="menu-trigger" class="menu-trigger" /> <label for="menu-trigger"> <span class="menu-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z" /> </svg> </span> </label> <a id="mood"> <svg class="mood-sunny" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>LIGHT</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> <svg class="mood-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>DARK</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> </a> <div class="trigger"> <div class="trigger-container"> <a class="menu-link" href="/colab-gsoc2020-Shreyas_Gokhale">home</a> <a class="menu-link" href="/colab-gsoc2020-Shreyas_Gokhale/about/">about author</a> <a class="menu-link" href="https://www.notion.so/shreyasgokhale/GSoC-JdeRobot-ff2c6cf65b3f4a488ca0af77e1daeff1" target="_blank" rel="noopener" >GSoC dashboard</a > <a class="menu-link" href="https://jderobot.github.io/" target="_blank" rel="noopener" >jderobot academy</a > <a class="menu-link" href="https://github.com/TheRoboticsClub/colab-gsoc2020-Shreyas_Gokhale" target="_blank" rel="noopener" >github repo</a > <a class="menu-link rss" href="/feed.xml"> <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 512 512" fill="#ED812E" > <title>RSS</title> <path d="M108.56,342.78a60.34,60.34,0,1,0,60.56,60.44A60.63,60.63,0,0,0,108.56,342.78Z" /> <path d="M48,186.67v86.55c52,0,101.94,15.39,138.67,52.11s52,86.56,52,138.67h86.66C325.33,312.44,199.67,186.67,48,186.67Z" /> <path d="M48,48v86.56c185.25,0,329.22,144.08,329.22,329.44H464C464,234.66,277.67,48,48,48Z" /> </svg> </a> </div> </div> </nav> </div> <div class="wrapper post"> <main class="page-content" aria-label="Content"> <article itemscope itemtype="https://schema.org/BlogPosting"> <header class="header"> <div class="tags"> <span itemprop="keywords"> <a class="tag" href="/colab-gsoc2020-Shreyas_Gokhale/tags/#amazon-warehouse-robot">AMAZON-WAREHOUSE-ROBOT</a>, <a class="tag" href="/colab-gsoc2020-Shreyas_Gokhale/tags/#exercise">EXERCISE</a>, <a class="tag" href="/colab-gsoc2020-Shreyas_Gokhale/tags/#gazebo">GAZEBO</a>, <a class="tag" href="/colab-gsoc2020-Shreyas_Gokhale/tags/#ros2">ROS2</a>, <a class="tag" href="/colab-gsoc2020-Shreyas_Gokhale/tags/#nav2">NAV2</a>, <a class="tag" href="/colab-gsoc2020-Shreyas_Gokhale/tags/#week-7">WEEK-7</a>, <a class="tag" href="/colab-gsoc2020-Shreyas_Gokhale/tags/#week-8">WEEK-8</a> </span> </div> <h1 class="header-title" itemprop="headline">Level 2!</h1> <div class="post-meta"> <time datetime="2020-07-23T22:30:00+02:00" itemprop="datePublished"> Jul 23, 2020 </time> <span itemprop="author" itemscope itemtype="https://schema.org/Person"> <span itemprop="name">Shreyas Gokhale</span> </span> <time hidden datetime="" itemprop="dateModified"> Jul 23, 2020 </time> <span hidden itemprop="publisher" itemtype="Person">Shreyas Gokhale</span> <span hidden itemprop="image"></span> <span hidden itemprop="mainEntityOfPage"><blockquote> <p>Issues Fixed:</p> <p>PR <a href="https://github.com/JdeRobot/CustomRobots/pull/8">#8</a> on Jderobot/CustomRobots</p> <p>Issues Pending:</p> <p><a href="https://github.com/JdeRobot/CustomRobots/issues/7">#7</a> WIP for ROS2 Amazon Robot model</p> </blockquote> </span> </div> </header> <div class="page-content" itemprop="articleBody"> <blockquote> <p>Issues Fixed:</p> <p>PR <a href="https://github.com/JdeRobot/CustomRobots/pull/8">#8</a> on Jderobot/CustomRobots</p> <p>Issues Pending:</p> <p><a href="https://github.com/JdeRobot/CustomRobots/issues/7">#7</a> WIP for ROS2 Amazon Robot model</p> </blockquote> <h1 id="week-7--8-blog"> <a href="#week-7--8-blog" class="anchor-head"></a> Week 7 + 8 blog </h1> <p>We discussed in the last iteration of the blog about the origins of ROS. After more than a decade of operations, the open source community became well aware of what awesomeness ROS is, and also some of it’s weaknesses. For example. as ROS uses it’s own middleware, a ros master must always be running in the background to manage the messages, nodes, servers and actions. This makes it much difficult to interface multiple robots with each other, independently. (If you are interested, check out my <a href="https://github.com/shreyasgokhale/Multi-Robot-Decentralized-Architecture">masters thesis</a> repo).</p> <p>ROS2 tries to overcome these problems by completely redesigning the underlying architecture while keeping the same concepts. For Jderobot, as we wanted to venture into multi-robots anyway, we decided to port the Amazon Robot exercise to be the first ever exercise in ROS2. This blog is an overview of some of the stuff I was working on for last two weeks and also a short writetup about ROS1 to ROS2 leap.</p> <p>We begin by first discussing aa bit about the most important change/ feature of ROS2: <em>DDS</em>.</p> <h3 id="dds"> <a href="#dds" class="anchor-head"></a> DDS </h3> <p>Data Distribution Service (DDS) provides a publish-subscribe transport which is very similar to ROS’s publish-subscribe transport. It is very flexible and extensively used in critical applications such as flight systems and battleships. If you are interested in learning more about the DDS and ROS2, if definitely recommend reading <a href="https://design.ros2.org/articles/ros_on_dds.html">this</a> article. <br /> However the developers have designed the ROS2 system in a such a way that hides much of the complexity of DDS while exposing some of its benefits. Hence we can safely overlook over minor details of the new middleware, for now!</p> <h3 id="ament-workspace-and-colcon-build"> <a href="#ament-workspace-and-colcon-build" class="anchor-head"></a> Ament workspace and Colcon Build </h3> <p>The second important change is the new build tool. Again, best place is to start with an article about <a href="https://design.ros2.org/articles/build_tool.html">build tool</a>. The new colcon build system is python native can also compile ROS1 and ROS2 packages. The launch files are now written in python3 and packages can be compiled individually.</p> <p><img src="https://media.giphy.com/media/l0MYEqEzwMWFCg8rm/giphy.gif" alt="I know, mind blown!" /></p> <h3 id="migration-from-ros1"> <a href="#migration-from-ros1" class="anchor-head"></a> Migration from ROS1 </h3> <p>ROS2 has shiny new features such as multithreading and realtime support. But with every change, comes the dreadful migration from ROS1 to ROS2. There are 2 excellent articles depicting <a href="https://design.ros2.org/articles/changes.html">changes from ROS1 to ROS2</a> by <em>Dirk Thomas</em> and <a href="https://industrial-training-master.readthedocs.io/en/melodic/_source/session7/ROS1-to-ROS2-porting.html">migration from ROS1 to ROS2</a> by <em>ROS industrial</em> and they are a must read before you even think about porting.</p> <p>Once we have understood what we are dealing with, and after <a href="https://index.ros.org/doc/ros2/Installation/#installationguide">installing</a> ROS2, it is best to follow the basic <a href="https://index.ros.org/doc/ros2/Tutorials/#tutorials">tutorials</a> of ROS2.</p> <p>Once that os done, it is the time to start porting. As mentioned <a href="https://index.ros.org/doc/ros2/Tutorials/Launch-files-migration-guide/">here</a>, I stated by porting a simple launch file. One of the best (and sadly the only complete one) resource for ROS2 examples are from turtlebot3. I considered the <a href="https://github.com/ROBOTIS-GIT/turtlebot3/tree/foxy-devel">foxy-devel</a> branch as a sort of standard for how my code must be structured. I ported my existing amazon_robot projects to include turtlebot3 model from ROS2</p> <h3 id="ros2-gazebo-and-sdf-16"> <a href="#ros2-gazebo-and-sdf-16" class="anchor-head"></a> ROS2, gazebo and SDF 1.6 </h3> <p>Now we have reached the part of porting which made me feel embarrassed, miserable and frustrated at the same time: The gazebo models. ROS2 also triggered a lot of changes in the way gazebo_ros connection is handled and made my <a href="">newly created</a> amazon robot <code class="highlighter-rouge">.xacro</code> model useless. I tried <a href="https://github.com/shreyasgokhale/CustomRobots/blob/foxy-devel/amazon_robot/amazon_robot_description/urdf/amazon_robot_xacro_generated.urdf">copying over</a> all include files in one single <code class="highlighter-rouge">urdf</code> file, modifying it and then trying to make gazebo spawn my robot correctly, but it somehow didn’t work. So I resorted to converting my model from <code class="highlighter-rouge">.xacro</code> description to SDF 1.6 model.</p> <p>I quickly realized that SDF format is also <a href="http://sdformat.org/tutorials?tut=pose_frame_semantics&amp;cat=specification&amp;">significantly changed</a> and I spent a few more hours trying to fix the link issues. Finally my model turned out somewhat okay, but the lift platform didn’t work as expected. I could create the warehouse world with pallets and our robot in it, but the prismatic joint just didn’t seem to function. I am yet to solve this problem and it might be even worth to completely switch over to a new, proper warehouse robot base like <a href="https://github.com/IntelligentRoboticsLabs/marathon_ros2">tiago</a>. But sadly, I could not find many well defined robot models for ROS2, except tb3 and <a href="https://github.com/chapulina/dolly">dolly</a>.</p> <h3 id="navigation-2"> <a href="#navigation-2" class="anchor-head"></a> Navigation 2 </h3> <p>This turned out to be surprisingly well documented. As our exercise will heavily depend on navigation concepts, I went through the awesome <a href="https://arxiv.org/abs/2003.00368">navigation2 paper</a> and <a href="https://navigation.ros.org/">documentation</a> and I would recommend the reader to do the same. I cannot explain this any better than those two resources.</p> <p>We will focus more on the navigation part in upcoming weeks. For now, just launching a tb3 simulation was sufficient.</p> <h3 id="porting-the-exercise"> <a href="#porting-the-exercise" class="anchor-head"></a> Porting the exercise </h3> <p>For ROS Noetic, I had to port the existing python2 code to python3. This turned out to be a nice segue into ROS2 as 1/4th porting work was already done. Still, I had to remove all the <code class="highlighter-rouge">rospy</code> code and morph it into <code class="highlighter-rouge">rclpy</code> one. With a minor hiccup of <code class="highlighter-rouge">move_base</code>, everything works now! As navigation2 integration is still ongoing, this will be updated soon!</p> <p>Warehouse <img src="assets/blog-images/week-7-8/WarehouseROS2.png" alt="The warehouse" /></p> <p>Amazon Robot In ROS2 <img src="assets/blog-images/week-7-8/AmazonRobotInROS2.png" alt="Amazon Robot" /></p> <p>Topics and Services <img src="assets/blog-images/week-7-8/TopicsNodesServices.png" alt="Topics and Services" /></p> <h3 id="creation-of-new-customrobots-repo"> <a href="#creation-of-new-customrobots-repo" class="anchor-head"></a> Creation of new CustomRobots repo </h3> <p>In the spirit of modernisation, Jderobot is also introducing new repo for all the Robots and related packages used in the academy in the form of <a href="https://github.com/JdeRobot/CustomRobots">CustomRobots</a> repo. So from now on, my model will be updated there.</p> <p>I am eager to also launch the first ever ROS2 academy exercise and hopefully it will be done soon! Until then!</p> <p><strong><em>Vi sees senere!</em></strong></p> </div> </article> </main> <nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/colab-gsoc2020-Shreyas_Gokhale/back-to-the-start" > <div class="nav-arrow">Previous</div> <span class="post-title">Back to the start</span> </a> <a class="post-nav-item post-nav-next" href="/colab-gsoc2020-Shreyas_Gokhale/phase-two-report"> <div class="nav-arrow">Next</div> <span class="post-title">Evaluation 2 Report</span> </a> </nav> </div> <footer class="footer"> <a class="footer_item" href="https://github.com/shreyasgokhale">github</a> <a class="footer_item" href="https://www.linkedin.com/in/shreyas6gokhale/">linkedin</a> <a class="footer_item" href="https://www.instagram.com/elementaryshr/">instagram</a> <a class="footer_item" href="https://shreyasgokhale.com/">blog</a> <a class="footer_item" href="https://www.shreyasgokhaleresu.me/">portfolio</a> <a class="footer_item" href="/feed.xml">rss</a> <span class="footer_item">&copy; 2020</span> <small class="footer_theme-copyright"> <!-- Klisé Theme: https://github.com/piharpi/jekyll-klise --> <a href="https://jekyllrb.com" target="_blank" rel="noreferrer noopener" >jekyll</a> <a href="https://github.com/piharpi/jekyll-klise" target="_blank" rel="noreferrer noopener" >klisé</a> theme | modified by <a href="https://shreyasgokhale.com/" target="_blank" rel="noreferrer noopener" >shreyas</a> </small> </footer> <script src="/colab-gsoc2020-Shreyas_Gokhale/assets/js/main.js" defer="defer"></script> <script src="/colab-gsoc2020-Shreyas_Gokhale/assets/js/galite.js"></script> <script> var galite = galite || {}; galite.UA = "UA-126403543-4"; </script> </body> </html>
